{"version":3,"file":"index.js","sources":["../src/focal-point.js","../src/focus-trap.js"],"sourcesContent":["/**\n * FocalPoint\n * The container that will maintain focus\n */\n\nimport React from 'react'\n\nlet timer = null\nlet isDOM = typeof document !== 'undefined'\n\nconst defaultProps = {\n  element: 'div'\n}\n\nclass FocalPoint extends React.Component {\n  constructor(props, context) {\n    super(props, context)\n\n    this.anchor = null\n\n    this.focus = this.focus.bind(this)\n    this._onBlur = this._onBlur.bind(this)\n    this._setRoot = this._setRoot.bind(this)\n  }\n\n  contains(element) {\n    return this.root.contains(element)\n  }\n\n  focus() {\n    if (this.contains(document.activeElement) === false) {\n      this.root.focus()\n    }\n  }\n\n  trapFocus(e) {\n    clearTimeout(timer)\n    timer = setTimeout(this.focus, 10)\n  }\n\n  returnFocus() {\n    // When transitioning between pages using hash route state,\n    // this anchor is some times lost. Do not attempt to focus\n    // on a non-existent anchor.\n    if (\n      this.anchor &&\n      typeof this.anchor === 'object' &&\n      typeof this.anchor.focus === 'function'\n    ) {\n      this.anchor.focus()\n    }\n  }\n\n  componentWillMount() {\n    if (isDOM) {\n      this.anchor = document.activeElement\n    }\n  }\n\n  componentDidMount() {\n    this.trapFocus()\n\n    document.addEventListener('focus', this._onBlur, true)\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('focus', this._onBlur, true)\n\n    clearTimeout(timer)\n\n    this.returnFocus()\n\n    this.anchor = null\n  }\n\n  render() {\n    let { children, element, className } = this.props\n\n    return React.createElement(element, {\n      ref: this._setRoot,\n      tabIndex: 0,\n      className,\n      children\n    })\n  }\n\n  // Private -------------------------------------------------- //\n\n  _setRoot(el) {\n    this.root = el\n  }\n\n  _onBlur(event) {\n    let current = this.anchor\n\n    if (current && current.contains(event.target) === false) {\n      event.preventDefault()\n      this.trapFocus()\n    }\n  }\n}\n\nFocalPoint.defaultProps = defaultProps\n\nexport default FocalPoint\n","import React from 'react'\nimport FocalPoint from './focal-point'\n\nconst defaultProps = {\n  active: true,\n  className: 'focus-trap',\n  onExit: () => {}\n}\n\nclass FocusTrap extends React.Component {\n  constructor(props, context) {\n    super(props, context)\n    this._onKeyUp = this._onKeyUp.bind(this)\n  }\n\n  render() {\n    let { active, className, children, element, onExit } = this.props\n\n    if (!active) return null\n\n    return (\n      <div className={`${className}-wrapper`} onKeyUp={this._onKeyUp}>\n        <div\n          aria-hidden=\"true\"\n          className={`${className}-backdrop`}\n          onClick={onExit}\n        />\n        <FocalPoint className={className} element={element}>\n          {children}\n        </FocalPoint>\n      </div>\n    )\n  }\n\n  // Private -------------------------------------------------- //\n\n  _onKeyUp(event) {\n    if (event.key === 'Escape') {\n      this.props.onExit()\n    }\n  }\n}\n\nFocusTrap.defaultProps = defaultProps\n\nexport default FocusTrap\n"],"names":["let","const","defaultProps","super"],"mappings":";;;;;;AAAA;;;;;AAKA,AAEAA,IAAI,KAAK,GAAG,KAAI;AAChBA,IAAI,KAAK,GAAG,OAAO,QAAQ,KAAK,YAAW;;AAE3CC,IAAMC,cAAY,GAAG;EACnB,OAAO,EAAE,KAAK;EACf;;AAED,IAAM,UAAU;EAAyB,mBAC5B,CAAC,KAAK,EAAE,OAAO,EAAE;IAC1BC,UAAK,KAAA,CAAC,MAAA,KAAK,EAAE,OAAO,EAAC;;IAErB,IAAI,CAAC,MAAM,GAAG,KAAI;;IAElB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAC;IAClC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,EAAC;IACtC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAC;GACzC;;;;gDAAA;;EAED,qBAAA,QAAQ,sBAAC,OAAO,EAAE;IAChB,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC;GACnC,CAAA;;EAED,qBAAA,KAAK,qBAAG;IACN,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,KAAK,EAAE;MACnD,IAAI,CAAC,IAAI,CAAC,KAAK,GAAE;KAClB;GACF,CAAA;;EAED,qBAAA,SAAS,uBAAC,CAAC,EAAE;IACX,YAAY,CAAC,KAAK,EAAC;IACnB,KAAK,GAAG,UAAU,CAAC,IAAI,CAAC,KAAK,EAAE,EAAE,EAAC;GACnC,CAAA;;EAED,qBAAA,WAAW,2BAAG;;;;IAIZ;MACE,IAAI,CAAC,MAAM;MACX,OAAO,IAAI,CAAC,MAAM,KAAK,QAAQ;MAC/B,OAAO,IAAI,CAAC,MAAM,CAAC,KAAK,KAAK,UAAU;MACvC;MACA,IAAI,CAAC,MAAM,CAAC,KAAK,GAAE;KACpB;GACF,CAAA;;EAED,qBAAA,kBAAkB,kCAAG;IACnB,IAAI,KAAK,EAAE;MACT,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC,cAAa;KACrC;GACF,CAAA;;EAED,qBAAA,iBAAiB,iCAAG;IAClB,IAAI,CAAC,SAAS,GAAE;;IAEhB,QAAQ,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,EAAC;GACvD,CAAA;;EAED,qBAAA,oBAAoB,oCAAG;IACrB,QAAQ,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,EAAC;;IAEzD,YAAY,CAAC,KAAK,EAAC;;IAEnB,IAAI,CAAC,WAAW,GAAE;;IAElB,IAAI,CAAC,MAAM,GAAG,KAAI;GACnB,CAAA;;EAED,qBAAA,MAAM,sBAAG;IACP,OAAoC,GAAG,IAAI,CAAC,KAAK;IAA3C,IAAA,QAAQ;IAAE,IAAA,OAAO;IAAE,IAAA,SAAS,iBAA9B;;IAEJ,OAAO,KAAK,CAAC,aAAa,CAAC,OAAO,EAAE;MAClC,GAAG,EAAE,IAAI,CAAC,QAAQ;MAClB,QAAQ,EAAE,CAAC;MACX,WAAA,SAAS;MACT,UAAA,QAAQ;KACT,CAAC;GACH,CAAA;;;;EAID,qBAAA,QAAQ,sBAAC,EAAE,EAAE;IACX,IAAI,CAAC,IAAI,GAAG,GAAE;GACf,CAAA;;EAED,qBAAA,OAAO,qBAAC,KAAK,EAAE;IACbH,IAAI,OAAO,GAAG,IAAI,CAAC,OAAM;;IAEzB,IAAI,OAAO,IAAI,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,KAAK,EAAE;MACvD,KAAK,CAAC,cAAc,GAAE;MACtB,IAAI,CAAC,SAAS,GAAE;KACjB;GACF,CAAA;;;EArFsB,KAAK,CAAC,SAsF9B,GAAA;;AAED,UAAU,CAAC,YAAY,GAAGE;;ACnG1BD,IAAM,YAAY,GAAG;EACnB,MAAM,EAAE,IAAI;EACZ,SAAS,EAAE,YAAY;EACvB,MAAM,EAAE,YAAG,EAAK;EACjB;;AAED,IAAM,SAAS;EAAyB,kBAC3B,CAAC,KAAK,EAAE,OAAO,EAAE;IAC1BE,UAAK,KAAA,CAAC,MAAA,KAAK,EAAE,OAAO,EAAC;IACrB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAC;GACzC;;;;8CAAA;;EAED,oBAAA,MAAM,sBAAG;IACP,OAAoD,GAAG,IAAI,CAAC,KAAK;IAA3D,IAAA,MAAM;IAAE,IAAA,SAAS;IAAE,IAAA,QAAQ;IAAE,IAAA,OAAO;IAAE,IAAA,MAAM,cAA9C;;IAEJ,IAAI,CAAC,MAAM,EAAE,EAAA,OAAO,IAAI,EAAA;;IAExB;MACE,qBAAC,SAAI,YAAW,SAAY,aAAS,CAAC,EAAE,SAAQ,IAAK,CAAC,QAAQ,EAAC;QAC7D,qBAAC;UACC,eAAY,MAAM,EAClB,YAAW,SAAY,cAAU,CAAC,EAClC,SAAQ,MAAO,EAAC,CAChB;QACF,qBAAC,UAAU,IAAC,WAAU,SAAU,EAAE,SAAQ,OAAQ,EAAC;UACjD,QAAS;SACE;OACT;KACP;GACF,CAAA;;;;EAID,oBAAA,QAAQ,sBAAC,KAAK,EAAE;IACd,IAAI,KAAK,CAAC,GAAG,KAAK,QAAQ,EAAE;MAC1B,IAAI,CAAC,KAAK,CAAC,MAAM,GAAE;KACpB;GACF,CAAA;;;EA/BqB,KAAK,CAAC,SAgC7B,GAAA;;AAED,SAAS,CAAC,YAAY,GAAG,YAAY;;;;"}